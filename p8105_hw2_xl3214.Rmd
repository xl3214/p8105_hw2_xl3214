---
title: "p8105_hw2_xl3214"
output: github_document
author: "Xuan Lu"
date: "`r Sys.Date()`"
---
## Question 0

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE, message = FALSE)
```

```{r github_repository, echo=FALSE}
usethis::use_git_config(
    user.name = "Xuan Lu", 
    user.email = "xuan.lu.080229@gmail.com"
  )
```

```{r library_packages, message = FALSE}
library(tidyverse)
library(dplyr)
```

## Question 1
**STEP 1: Clean dataset pols-month.csv**

Directions: Use `separate()` to break up the variable mon into integer variables `year`, `month`, and `day`; replace month number with month name; create a `president` variable taking values `gop` and `dem`, and remove `prez_dem` and `prez_gop`; and remove the `day` variable.

```{r clean pols_month}
pols_month <- read_csv("./fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(mon, 
         into = c("year","month_num","day"), 
         convert = TRUE) %>% 
  mutate("month" = month.name[month_num]) %>%
  mutate(president = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) %>%
  select(year, month, everything(), -day, -prez_gop, -prez_dem, -month_num) 
pols_month
```

**STEP 2: Clean dataset snp.csv**

Directions: Use a similar process to the above. For consistency across datasets, arrange according to `year` and `month`, and organize so that `year` and `month` are the leading columns.

```{r clean snp}
snp <- 
  read_csv("./fivethirtyeight_datasets/snp.csv") %>%
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) %>%
  arrange(year, month) %>%
  mutate("month" = month.name[month]) %>%
  select(year, month, close) 
snp
```

**STEP 3: Tidy dataset unemployment.csv**

Directions: Tidy the unemployment data so that it can be merged with the previous datasets. This process will involve switching from *“wide”* to *“long”* format; ensuring that key variables have the same name; and ensuring that key variables take the same values.

```{r clean unemployment}
unemployment <- 
  read_csv("./fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(Jan:Dec, names_to = "month_abb", values_to = "unemployment") %>%
  mutate("month" = factor(month_abb, levels = month.abb, labels = month.name)) %>%
  rename(year = Year) %>%
  select(year, month, unemployment)
unemployment
```

**STEP 4: Merge datasets**

Directions: Join the datasets by merging `snp` into `pols`, and merging `unemployment` into the result.

```{r merging}
data_q1 <- left_join(pols_month, snp) %>%
  left_join(x = ., y = unemployment)
data_q1
```

